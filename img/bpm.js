!function(t,e){var n=e();"function"==typeof define&&define.amd?define("bpm",n):t.BPM=n}(this,function(){"use strict";function t(t,e){var n=T.getElementsByName(t),r=e>0?e:0;return n.length>r?n[r].content:""}function e(t,e,n,r){var i,o;return t?(n=n||"=",e+=n,i=t.indexOf(e),~i?(i+=e.length,o=t.indexOf(r,i),i>o&&(o=t.length),t.substring(i,o)):""):""}function n(t){return t?e(T.cookie,t,"=",";"):""}function r(t,e,n,r){if(null==e&&(n=-1,e=""),r=r||M.host,"number"!=typeof n)T.cookie=t+"="+e+";domain="+r+";path=/";else{var i=new Date,o=i.getTime();o+=864e5*n,i.setTime(o),o=i.getTime(),T.cookie=t+"="+e+";domain="+r+";expires="+i.toUTCString()+";path=/"}}function i(t,e,n){return t?(e=e||"click","function"==typeof n?(t.addEventListener?t.addEventListener(e,n,!1):t.attachEvent&&t.attachEvent("on"+e,n),!0):void 0):!1}function o(t,e){return t&&t.getAttribute&&t.getAttribute(e)||""}function a(t){return t.target||(t.pageX=t.x,t.pageY=t.y,t.target=t.srcElement),void 0===t.layerX&&(t.layerX=t.offsetX),void 0===t.layerY&&(t.layerY=t.offsetY),t}function u(t){if("string"!=typeof t)throw"trim need a string as parameter";for(var e=t.length,n=0,r=/(\u3000|\s|\t|\u00A0)/;e>n&&r.test(t.charAt(n));)n+=1;for(;e>n&&r.test(t.charAt(e-1));)e-=1;return t.slice(n,e)}function f(t,e){var n,r,i,o,a,f,c=u(t).split("&"),l={};for(e=void 0===e?1:0,n=e?decodeURIComponent:function(t){return t},r=0,i=c.length;i>r;r++)c[r]&&(o=c[r].split("="),a=o[0],f=o[1],o.length<2&&(f=a,a="_"),l[a]?(ot(l[a])||(l[a]=[l[a]]),l[a].push(n(f))):l[a]=n(f));return l}function c(t,e,n){return null==e?t:t+"="+(n?ft(String(e)):e)}function l(t,e){if("object"!=typeof t)return t;var n,r,i,o=[];e=void 0===e?1:0;for(n in t)if(t.hasOwnProperty(n))if(r=t[n],r&&"object"==typeof r){if("number"==typeof r.length)for(i=r.length;i--;)o.push(c(n,r[i],e))}else o.push(c(n,r,e));return o.join("&").replace(/%20/g,"+")}function s(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t}function p(t,e){for(var n=-1,r=t.length;++n<r;)e(t[n],n)}function d(){for(var t="",e=16;e--;)t+=Math.floor(16*Math.random()).toString(16);return t}function g(){var t,e,n,r=T.body;return k.innerWidth?(t=k.innerWidth,e=k.innerHeight):r&&r.clientWidth&&(t=r.clientWidth,e=r.clientHeight),n=T.documentElement,n&&n.clientHeight&&n.clientWidth&&(t=n.clientWidth,e=n.clientHeight),{width:t,height:e}}function h(t){return{x:t.pageX,y:t.pageY}}function y(t){v(t)}function v(t){L(function(){(new Image).src=t+"&ver="+N+"&"+it()})}function m(){R||Z||b()}function b(t){var e,n=pt.vid();return 1>W?(L(m),void W++):(n=pt.sid(),e=B+[dt.CI(),dt.PI(t),dt.UI(),dt.EX()].join("&"),void v(e))}function w(t,e,n){var r,i;if(t&&e){n=n||{},"object"!=typeof n&&(n={value:n}),n.type=n.type||1,r=[],p(["xy","href","type"],function(t,e){r.push(n[t]||""),delete n[t]});try{i=t+"="+[pt.vid(),pt.sid(),pt.userNick(),st.url(),st.referrer(),st.pageId(),e,r.join(H),ft(l(n,!1))].join(H),y(J+i)}catch(o){}}}function O(t,e){w("ac",t,e)}function S(t,e){w("ua",t,e)}function E(t,e){for(;t;){if(e&&e(t),o(t,"data-bpm")||o(t,"data-bpm-uatrack")||o(t,"data-bpm-actrack"))return t;if(t===T.body)break;t=t.parentNode}return null}function I(t){var e,n,r,i,u,c,l,s=a(t),p=s.target,d=null,y=E(p,function(t){var e=t.tagName;"A"!==e&&"a"!==e||(d=t)});(y||d)&&(n=o(y,"data-bpm-uatrack")||o(y,"data-bpm"),e=o(y,"data-bpm-actrack"),r=f(n)||{},l=d&&d.href||y&&y.href,i=r.name||r._||"N/A",u=r.value,c=h(s),"object"!=typeof u&&(u=u?{value:u}:{}),l&&(u.href=l),u.xy=[~~c.x,~~c.y,g().width].join(","),S(i,u))}function j(t){var e=(t||0).message,n="pageError",r={};e&&(0===e.indexOf("Script error.")&&(n="unknownError"),p(["filename","lineno","colno","message","timeStamp"],function(e){r[e]=t[e]}),L(function(){S("pageError",{$type:n,ex:rt(r),ts:it()})}))}function x(t){S("pageExit",{type:2,ts:it()})}var N,k,T,A,C,D,M,P,L,U,_,X,B,J,z,H,W,F,$,V,Y,G,R,Z,q,K,Q,tt,et,nt,rt,it,ot,at,ut,ft,ct,lt,st,pt,dt,gt,ht,yt,vt,mt,bt;if("undefined"==typeof window)throw"Error: gather not support, please make sure run in modern browser";return N="1.0.7-20160509.1462774932",k=window,T=document,A=navigator,C=A.userAgent,D=k.screen,M=k.location,P=k.setTimeout,L=k.setImmediate||function(t){P(t,1)},U=M.href,_=U.indexOf("https")>-1?"https://":"http://",X=_+"analysis.aomygod.com",B=X+"/a.gif?",J=X+"/e.gif?",z=X+"/g.gif?",H="||",W=0,F=T.referrer,$="_tjid",V=$,Y="ULV",G="aomygod.com",R=!1,Z=!1,q="",K=16777215,Q="",tt=function(t){},et=function(){var t,e,i=k.localStorage;if(i)return{get:function(t){var e=i.getItem(t);return e?unescape(e):e},set:function(t,e){e=e?escape(e):e,i.setItem(t,e)}};if(k.ActiveXObject){t=document.documentElement,e="localstorage";try{t.addBehavior("#default#userdata"),t.save("localstorage")}catch(o){}return{set:function(n,r){try{t.setAttribute(n,r),t.save(e)}catch(i){}},get:function(n){try{return t.load(e),t.getAttribute(n)}catch(r){}}}}return{get:n,set:r}}(),nt=function(t){function e(t){return 10>t?"0"+t:t}function n(t){return o.lastIndex=0,o.test(t)?'"'+t.replace(o,function(t){var e=f[t];return"string"==typeof e?e:"\\u"+("0000"+t.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+t+'"'}function r(t,e){var i,o,f,l,s,p=a,d=e[t];switch(d&&"object"==typeof d&&"function"==typeof d.toJSON&&(d=d.toJSON(t)),"function"==typeof c&&(d=c.call(e,t,d)),typeof d){case"string":return n(d);case"number":return isFinite(d)?String(d):"null";case"boolean":case"null":return String(d);case"object":if(!d)return"null";if(a+=u,s=[],"[object Array]"===Object.prototype.toString.apply(d)){for(l=d.length,i=0;l>i;i+=1)s[i]=r(i,d)||"null";return f=0===s.length?"[]":a?"[\n"+a+s.join(",\n"+a)+"\n"+p+"]":"["+s.join(",")+"]",a=p,f}if(c&&"object"==typeof c)for(l=c.length,i=0;l>i;i+=1)"string"==typeof c[i]&&(o=c[i],f=r(o,d),f&&s.push(n(o)+(a?": ":":")+f));else for(o in d)Object.prototype.hasOwnProperty.call(d,o)&&(f=r(o,d),f&&s.push(n(o)+(a?": ":":")+f));return f=0===s.length?"{}":a?"{\n"+a+s.join(",\n"+a)+"\n"+p+"}":"{"+s.join(",")+"}",a=p,f}}"function"!=typeof Date.prototype.toJSON&&(Date.prototype.toJSON=function(){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+e(this.getUTCMonth()+1)+"-"+e(this.getUTCDate())+"T"+e(this.getUTCHours())+":"+e(this.getUTCMinutes())+":"+e(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(){return this.valueOf()});var i,o,a,u,f,c;return"function"!=typeof t.stringify&&(o=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,f={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},t.stringify=function(t,e,n){var i;if(a="",u="","number"==typeof n)for(i=0;n>i;i+=1)u+=" ";else"string"==typeof n&&(u=n);if(c=e,e&&"function"!=typeof e&&("object"!=typeof e||"number"!=typeof e.length))throw new Error("JSON.stringify");return r("",{"":t})}),"function"!=typeof t.parse&&(i=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,t.parse=function(t,e){function n(t,r){var i,o,a=t[r];if(a&&"object"==typeof a)for(i in a)Object.prototype.hasOwnProperty.call(a,i)&&(o=n(a,i),void 0!==o?a[i]=o:delete a[i]);return e.call(t,r,a)}var r;if(t=String(t),i.lastIndex=0,i.test(t)&&(t=t.replace(i,function(t){return"\\u"+("0000"+t.charCodeAt(0).toString(16)).slice(-4)})),/^[\],:{}\s]*$/.test(t.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return r=(0,eval)("("+t+")"),"function"==typeof e?n({"":r},""):r;throw new SyntaxError("JSON.parse")}),t}(window.JSON||{}),rt=function(){var t=function(t){var e=[],n=[];return function r(t,i){var o,a,u;if(!("object"!=typeof t||null===t||t instanceof Boolean||t instanceof Date||t instanceof Number||t instanceof RegExp||t instanceof String)){if(t==t.window)return"[[Circular Window]]";if(t.nodeType)return"[[DOM HTMLElement]]";for(o=0;o<e.length;o+=1)if(e[o]===t)return{$ref:n[o]};if(e.push(t),n.push(i),"[object Array]"===Object.prototype.toString.apply(t))for(u=[],o=0;o<t.length;o+=1)u[o]=r(t[o],i+"["+o+"]");else{u={};for(a in t)Object.prototype.hasOwnProperty.call(t,a)&&(u[a]=r(t[a],i+"["+nt.stringify(a)+"]"))}return u}return t}(t,"$")};return function(e){return nt.stringify(t(e))}}(),it=Date.now||function(){return+new Date},ot=Array.isArray||function(t){return"[object Array]"==={}.toString.call(t)},at=function(t,e){if(t.filter)return t.filter(e);for(var n=[],r=-1,i=t.length;++r<i;)e(t[r],r)&&n.push(t[r]);return n},ut=function(t){try{return nt.parse(t)}catch(e){try{return(0,eval)("("+t+")")}catch(e){return{_:t}}}},ft=function(t){try{return k.encodeURIComponent(t)}catch(e){return t}},ct=function(){function t(t){for(var e=-1,n=t.length;++e<n;)t[e](T)}function e(){var e=u;a&&e.length&&(u=[],t(e))}function n(){if(!a){if(!T.body)return L(n);a=!0,f?(T.removeEventListener("DOMContentLoaded",n),k.removeEventListener("load",n)):k.detachEvent&&k.detachEvent("onload",n),i&&clearInterval(i),e()}}var r,i,o,a=!1,u=[],f=T.addEventListener;if("complete"===T.readyState||T.body&&T.body.childNodes.length>0)L(n);else if(f)T.addEventListener("DOMContentLoaded",n,!1),k.addEventListener("load",n,!1);else if(k.attachEvent){k.attachEvent("onload",n),T.attachEvent("onreadystatechange",n),o=T.documentElement;try{r=null===k.frameElement}catch(c){}o.doScroll&&r&&k.external&&(i=setInterval(function(){try{o.doScroll(),n()}catch(t){}},30))}return function(t){a?t(T):u.push(t)}}(),lt={screenSize:function(){return K&!0?D.width+"x"+D.height:""},winSize:function(){var t=g();return K&!0?t.width+"x"+t.height:""},appCode:function(){return K&!0?A.appCodeName:""},appName:function(){return K&!0?A.appName.indexOf("Microsoft Internet Explorer")>-1?"MSIE":A.appName:""},guid:function(){var t=n("bpm-guid");return t||(t=d(),r("bpm-guid",t,365,G)),t},platform:function(){return K&!0?A.platform:""},language:function(){return K&!0?A.systemLanguage||A.language:""},timezone:function(){return K&!0?(new Date).getTimezoneOffset()/60:""},flashVer:function(){var t,e,n,r,i,o,a;if(K&!1)return"";if(t=A.plugins,t&&t.length){for(i in t)if(n=t[i],null!=n.description){if(e)break;r=n.description.toLowerCase(),-1==r.indexOf("flash")||(e=n.version?parseInt(n.version):r.match(/\d+/))}}else if(k.ActiveXObject)for(o=10;o>=2;o--)try{if(a=new ActiveXObject("ShockwaveFlash.ShockwaveFlash."+o)){e=o;break}}catch(u){}else-1!=C.indexOf("webtv/2.5")?e=3:-1!=C.indexOf("webtv")&&(e=2);return e},dpr:function(){return window.devicePixelRatio||1}},st={url:function(){return ft(U)},pageId:function(e){var n=e||Q;return n||(n=t("pageid")||"0"),n},referrer:function(){if(K&!1)return"";var t=F;if(!t&&k.parent)try{t=k.parent.document.referrer}catch(n){}return t&&!t.match(/^[^\?&#]*.swf([\?#])?/)||(t=e(U,"ref","=","&")||t),t?ft(t):""},onLoadTime:function(){var t=(window.$PAGE_DATA||0).startTime;return K&!0&&t?new Date-t:""},bigpipe:function(){var t=k.$CONFIG||{};return 1&!!t.bigpipe}},pt={vid:function(){return lt.guid()},sid:function(){var t=n($);return t||(t=lt.guid()),t},lastVisit:function(){var t,e,i,o=n($),a=n(Y),u=a.split(":");return u.length>=6?o===u[4]?(e=new Date,i=new Date(parseInt(u[0])),u[1]=parseInt(u[1])+1,e.getMonth()!==i.getMonth()?u[2]=1:u[2]=parseInt(u[2])+1,(e.getTime()-i.getTime())/864e5>=7?u[3]=1:e.getDay()<i.getDay()?u[3]=1:u[3]=parseInt(u[3])+1,t=u[0]+":"+u[1]+":"+u[2]+":"+u[3],u[5]=u[0],u[0]=e.getTime(),r(Y,u[0]+":"+u[1]+":"+u[2]+":"+u[3]+":"+o+":"+u[5],360)):t=u[5]+":"+u[1]+":"+u[2]+":"+u[3]:(t=it()+":1:1:1",r(Y,t+":"+o+":",360)),t||""},userNick:function(){return q?q:(q=n(V),q||"guest")}},dt={CI:function(){var t=["ss:"+lt.screenSize(),"ws:"+lt.winSize(),"ac:"+lt.appCode(),"an:"+lt.appName(),"pf:"+lt.platform(),"lg:"+lt.language(),"tz:"+lt.timezone(),"fv:"+lt.flashVer(),"dpr:"+lt.dpr()];return"CI="+t.join(H)},PI:function(t){var e=["url:"+st.url(),"pid:"+st.pageId(t),"ref:"+st.referrer(),"nld:"+st.onLoadTime()];return"PI="+e.join(H)},UI:function(){var t=["vid:"+pt.vid(),"sid:"+pt.sid(),"lv:"+pt.lastVisit(),"un:"+pt.userNick()];return"UI="+t.join(H)},P_PI:function(){var t=["ref:"+st.referrer()];return"PI="+t.join(H)},P_UI:function(){var t=["vid:"+pt.vid(),"sid:"+pt.sid(),"un:"+pt.userNick()];return"UI="+t.join(H)},EX:function(){var t,e,n,r={};for((gt||0).length&&(r.gatherMore=gt),t=at(T.getElementsByTagName("input"),function(t,e){return"bpm-extra-params"===t.name}),e=-1;n=t[++e];)s(r,ut(n.value));return"EX="+ft(rt(r))}},R=function(t,e){if(k.top==k)return!1;var n=T.body;try{return 0===n.clientHeight?!1:!(n.clientHeight>=t&&n.clientWidth>=e)}catch(r){return!0}}(320,240),gt=[],ht=[],yt=[],vt=k.BPM,vt&&ot(vt)&&p(vt,function(t,e){switch(t[0]){case"setGatherType":K=t[1];break;case"setGatherInfo":Q=t[1]||Q;break;case"setGatherMore":gt.push.apply(gt,t.slice(1));break;case"acTrack":ht.push.apply(ht,t.slice(1));break;case"uaTrack":yt.push.apply(yt,t.slice(1))}}),ct(function(){m(),ht.length>0&&p(ht,function(t,e){O.apply(null,t)}),yt.length>0&&p(yt,function(t,e){S.apply(null,t)}),i(T.body,"click",I),i(k,"error",j),i(k,"beforeunload",x)}),mt=k.BPM||(k.BPM=[]),bt=function(t){return function(){try{return t.apply(null,arguments)}catch(e){}}},mt.log=bt(b),mt.acTrack=bt(O),mt.uaTrack=bt(S),mt});